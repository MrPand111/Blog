## 1 什么是HTTPS

HTTPS 协议（HyperText Transfer Protocol over Secure Socket Layer）：可以理解为HTTP+SSL/TLS， 即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL，用于安全的 HTTP 数据传输。

## 2 加密类型

**非对称加密**

加密使用的密钥和解密使用的密钥是不相同的，分别称为：公钥、私钥，公钥和算法都是公开的，私钥是保密的。非对称加密算法性能较低，但是安全性超强，由于其加密特性，非对称加密算法能加密的数据长度也是有限的。例如：RSA

**哈希算法**

将任意长度的信息转换为较短的固定长度的值，通常其长度要比信息小得多，且算法不可逆。例如：MD5

**数字签名**

签名就是在信息的后面再加上一段内容（信息经过hash后的值），可以证明信息没有被修改过。hash值一般都会加密后（也就是签名）再和信息一起发送，以保证这个hash值不被修改。

## 3 SSL协议的握手过程

开始加密通信之前，客户端和服务器首先必须建立连接和交换参数，这个过程叫做握手（handshake）。

假定客户端叫做爱丽丝，服务器叫做鲍勃。

1. 第一步，爱丽丝给出**协议版本号**，一个客户端生成的**随机数（Client random）**，以及客户端支持的**加密方法**。
2. 鲍勃确认双方使用的**加密方法**，并给出**数字证书**、以及一个服务器生成的**随机数（Server random）**。
3. 爱丽丝确认**数字证书有效**，然后生成一个新的**随机数（Premaster secret）**，并使用数字证书中的**公钥**，加密这个**随机数**，发给鲍勃。并且还会提供一个前面**所有内容的hash 的值**，用来供服务器检验。
4. 鲍勃使用自己的**私钥**，获取爱丽丝发来的**随机数（Premaster secret）**。并提供前面所有内容的 hash 值来供客户端检验。
5. 爱丽丝和鲍勃根据约定的**加密方法**，使用前面的**三个随机数**，生成**“对话密钥”(session key)**，用来加密接下来的整个对话过程。



# 4 如何解决中间人修改证书签名

1. 为了解决这样的问题，我们可以使用数字证书的方式，首先我们使用一种**Hash算法来对我们的公钥和其他信息进行加密**生成 一个信息摘要。
2. 然后让有公信力的认证中心（简称 CA ）用它的私钥对消息摘要加密，形成**签名**。
3. 最后将原始的信息和签名合 在一起，称为数字证书。
4. 当接收方收到数字证书的时候，先根据原始信息使用同样的 Hash 算法生成一个摘要。
5. 然后使用公证处的公钥来对数字证书中的摘要进行解密。
6. 最后将解密的摘要和我们生成的摘要进行对比，就能发现我们得到的信息是否被更改了。

这个方法最要的是认证中心的可靠性，一般浏览器里会内置一些顶层的认证中心的证书，相当于我们自动信任了他们，只有 这样我们才能保证数据的安全。